#!/usr/bin/env python3
import os
import sys
import zlib

def main():
    if len(sys.argv) < 2:
        print(f"Usage: {sys.argv[0]} [inflate|deflate] [file]")
        return

    mode = sys.argv[1]
    if len(sys.argv) > 2:
        with open(sys.argv[2], "rb") as f:
            data = f.read()
    else:
        data = sys.stdin.buffer.read()

    if mode == "inflate":
        result = zlib.decompress(data)
        sys.stdout.buffer.write(result)
    elif mode == "deflate":
        result = zlib.compress(data)
        sys.stdout.buffer.write(result)
    else:
        print("Invalid mode. Use inflate or deflate.")

if __name__ == "__main__":
    main()

